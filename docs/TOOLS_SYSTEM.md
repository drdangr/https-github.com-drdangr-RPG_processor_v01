# –°–∏—Å—Ç–µ–º–∞ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (Tools)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –ö–∞–∂–¥—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –ò–ò (Schema) –∏ –ª–æ–≥–∏–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (Implementation).

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `move_object` | –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞/–∏–≥—Ä–æ–∫–∞ –∫ –Ω–æ–≤–æ–º—É –≤–ª–∞–¥–µ–ª—å—Ü—É (–∏–≥—Ä–æ–∫, –ª–æ–∫–∞—Ü–∏—è, –æ–±—ä–µ–∫—Ç) |
| `move_player` | –ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞ –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏ (—á–µ—Ä–µ–∑ –¥–≤–µ—Ä–∏/–ø—Ä–æ—Ö–æ–¥—ã) |
| `find_entity_location` | –ü–æ–∏—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –ø—É—Ç–∏ –∫ —Å—É—â–Ω–æ—Å—Ç–∏ (—É—á–∏—Ç—ã–≤–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) |
| `set_attribute` | –°–æ–∑–¥–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞ —É –∏–≥—Ä–æ–∫–∞, –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –ª–æ–∫–∞—Ü–∏–∏ |
| `delete_attribute` | –£–¥–∞–ª–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ —É –∏–≥—Ä–æ–∫–∞, –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –ª–æ–∫–∞—Ü–∏–∏ |
| `create_object` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Å –Ω–∞–±–æ—Ä–æ–º –∞—Ç—Ä–∏–±—É—Ç–æ–≤ |
| `delete_object` | –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ (–≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –∫ —Ä–æ–¥–∏—Ç–µ–ª—é) |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

–ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `tools/` –¥–æ–ª–∂–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ `GameTool` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`export default`).

```typescript
// types.ts
export interface GameTool {
  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è Gemini API
  definition: {
    name: string;        // –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–∞–ø—Ä. "move_object")
    description: string; // –û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –ò–ò, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
    parameters: {        // JSON Schema –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
      type: Type.OBJECT,
      properties: { ... },
      required: [...]
    }
  };
  
  // –õ–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  apply: (state: GameState, args: any) => { 
    newState: GameState; // –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    result: string;      // –¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç
  };
}
```

## –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

### move_object

–ü–µ—Ä–µ–º–µ—â–∞–µ—Ç **–æ–±—ä–µ–∫—Ç –∏–ª–∏ –∏–≥—Ä–æ–∫–∞** –≤ –Ω–æ–≤–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

* –ü–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–ö–ª—é—á -> –ò–≥—Ä–æ–∫)
* –ü–æ–º–µ—â–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–ö–ª—é—á -> –°—É–Ω–¥—É–∫)
* –ü–æ—Å–∞–¥–∫–∏ –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞/–≤ –æ–±—ä–µ–∫—Ç—ã (–ò–≥—Ä–æ–∫ -> –ú–∞—à–∏–Ω–∞ / –ò–≥—Ä–æ–∫ -> –ö—Ä–µ—Å–ª–æ)

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É –∫–æ–º–Ω–∞—Ç–∞–º–∏ (–¥–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å `move_player`).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `objectId` (required) ‚Äî ID –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∏–≥—Ä–æ–∫–∞ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è
* `targetId` (required) ‚Äî ID —Ü–µ–ª–∏ (–∏–≥—Ä–æ–∫, –ª–æ–∫–∞—Ü–∏—è –∏–ª–∏ –¥—Ä—É–≥–æ–π –æ–±—ä–µ–∫—Ç)

**–ó–∞—â–∏—Ç–∞:**

* –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –∏ —Ü–µ–ª–∏
* –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç –≤ —Å–µ–±—è
* –ó–∞—â–∏—Ç–∞ –æ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ locationId:**

* –ü—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –í–°–ï –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `locationId`
* `locationId` –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø—É—Ç–µ–º –æ–±—Ö–æ–¥–∞ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –≤–≤–µ—Ä—Ö –¥–æ –∫–æ—Ä–Ω–µ–≤–æ–π –ª–æ–∫–∞—Ü–∏–∏
* –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π

### move_player

–ü–µ—Ä–µ–º–µ—â–∞–µ—Ç –∏–≥—Ä–æ–∫–∞ –∏–∑ –æ–¥–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏ –≤ –¥—Ä—É–≥—É—é.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `playerId` (required) ‚Äî ID –∏–≥—Ä–æ–∫–∞
* `targetLocationId` (required) ‚Äî ID —Ü–µ–ª–µ–≤–æ–π –ª–æ–∫–∞—Ü–∏–∏

**–ó–∞—â–∏—Ç–∞:**

* –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∏–≥—Ä–æ–∫–∞ –∏ –ª–æ–∫–∞—Ü–∏–π
* –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏ (`out` –∏–ª–∏ `bidirectional` –∏–∑ —Ç–µ–∫—É—â–µ–π)
* –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ —Ç—É –∂–µ –ª–æ–∫–∞—Ü–∏—é

### find_entity_location

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—É—â–Ω–æ—Å—Ç—å, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—è –≤—Å—é —Ü–µ–ø–æ—á–∫—É –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏.
–ü–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ –∏–≥—Ä–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è "–≤ –º–∞—à–∏–Ω–µ", –∞ –º–∞—à–∏–Ω–∞ "–≤ –≥–∞—Ä–∞–∂–µ" ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–µ—Ä–Ω–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ª–æ–∫–∞—Ü–∏—é "–ì–∞—Ä–∞–∂" –∏ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `entityId` (required) ‚Äî ID —Å—É—â–Ω–æ—Å—Ç–∏ (–∏–≥—Ä–æ–∫–∞ –∏–ª–∏ –æ–±—ä–µ–∫—Ç–∞)

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
`–ú–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ: "–ì–∞—Ä–∞–∂" (loc_garage). –ü—É—Ç—å: –ì–∞—Ä–∞–∂ > –ú–∞—à–∏–Ω–∞ (obj_car) > –ò–≥—Ä–æ–∫ (char_001)`

### set_attribute

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `entityType` (required) ‚Äî "player" | "object" | "location"
* `entityId` (required) ‚Äî ID —Å—É—â–Ω–æ—Å—Ç–∏
* `attributeName` (required) ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ (–ª—é–±–æ–µ)
* `value` (required) ‚Äî —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä—ã:**

```typescript
// –ò–≥—Ä–æ–∫ –ø–æ–ª—É—á–∏–ª —Ä–∞–Ω–µ–Ω–∏–µ
{ entityType: "player", entityId: "char_001", 
  attributeName: "health", value: "—Ä–∞–Ω–µ–Ω –≤ –ø–ª–µ—á–æ, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å" }

// –û–±—ä–µ–∫—Ç –∏–∑–º–µ–Ω–∏–ª —Å–æ—Å—Ç–æ—è–Ω–∏–µ
{ entityType: "object", entityId: "obj_bottle",
  attributeName: "condition", value: "–ø—É—Å—Ç–∞—è" }
```

### delete_attribute

–£–¥–∞–ª—è–µ—Ç –∞—Ç—Ä–∏–±—É—Ç —É —Å—É—â–Ω–æ—Å—Ç–∏ (–∫–æ–≥–¥–∞ –æ–Ω –±–æ–ª—å—à–µ –Ω–µ –∞–∫—Ç—É–∞–ª–µ–Ω).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `entityType` (required) ‚Äî "player" | "object" | "location"
* `entityId` (required) ‚Äî ID —Å—É—â–Ω–æ—Å—Ç–∏
* `attributeName` (required) ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** –≠—Ñ—Ñ–µ–∫—Ç –æ—Ç—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—à—ë–ª ‚Äî —É–¥–∞–ª—è–µ–º –∞—Ç—Ä–∏–±—É—Ç "poison".

### create_object

–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç –≤ –º–∏—Ä–µ –∏–≥—Ä—ã.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `name` (required) ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞
* `connectionId` (required) ‚Äî ID –≤–ª–∞–¥–µ–ª—å—Ü–∞/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
* `attributes` (optional) ‚Äî JSON —Å—Ç—Ä–æ–∫–∞ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏

**–ü—Ä–∏–º–µ—Ä:**

```typescript
{
  name: "–ë—É—Ç—ã–ª–∫–∞ —Ä–æ–º–∞",
  connectionId: "char_001",
  attributes: '{"condition": "–ø–æ–ª–Ω–∞—è", "content": "–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–æ–º", "material": "—Å—Ç–µ–∫–ª–æ"}'
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* ID –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (`obj_{timestamp}_{random}`)
* –ï—Å–ª–∏ `attributes` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω, —Å–æ–∑–¥–∞—ë—Ç—Å—è `condition: "–≤ —Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏"`
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JSON —Å—Ç—Ä–æ–∫—É –∏–ª–∏ –æ–±—ä–µ–∫—Ç

### delete_object

–£–¥–∞–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç –∏–∑ –º–∏—Ä–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

* `objectId` (required) ‚Äî ID –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

* –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –∫ —Ä–æ–¥–∏—Ç–µ–ª—é —É–¥–∞–ª—è–µ–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
* –ï—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å ‚Äî –∏–≥—Ä–æ–∫ –∏–ª–∏ –ª–æ–∫–∞—Ü–∏—è, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è —Ç–∞–º

## –ú–Ω–æ–≥–æ—Ö–æ–¥–æ–≤—ã–π —Ü–∏–∫–ª

AI –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã **–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥** –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —Ö–æ–¥–∞:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–î–∂–µ–∫ –Ω–∞—Ö–æ–¥–∏—Ç –∫–ª—é—á –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏–º —Å—É–Ω–¥—É–∫"

–®–∞–≥ 1: create_object (—Å–æ–∑–¥–∞—ë—Ç –∫–ª—é—á)
–®–∞–≥ 2: move_object (–ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –∫–ª—é—á –∫ –∏–≥—Ä–æ–∫—É)
–®–∞–≥ 3: set_attribute (—Å—É–Ω–¥—É–∫: condition ‚Üí "–æ—Ç–∫—Ä—ã—Ç")
–®–∞–≥ 4: AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–∞—Ä—Ä–∞—Ç–∏–≤
```

–ú–∞–∫—Å–∏–º—É–º –∏—Ç–µ—Ä–∞—Ü–∏–π: **5** (–∑–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞).

## –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `tools/` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `tools/myNewTool.ts`)
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ `definition` –∏ `apply`
3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ `tools/index.ts`:

```typescript
// tools/index.ts
import myNewTool from './myNewTool';

let tools: GameTool[] = [
  moveObject,
  setAttribute,
  deleteAttribute,
  createObject,
  deleteObject,
  myNewTool  // ‚Üê –î–æ–±–∞–≤—å—Ç–µ —Å—é–¥–∞
];
```

4. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –≤ `tools/__tests__/myNewTool.test.ts`

## –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `apply`

### 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```typescript
if (!objectId || !targetId) {
  return { 
    newState: state,  // ‚Üê –û–†–ò–ì–ò–ù–ê–õ–¨–ù–û–ï —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    result: `–û—à–∏–±–∫–∞: objectId –∏ targetId –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã` 
  };
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π

```typescript
const obj = clonedState.objects.find(o => o.id === objectId);
if (!obj) {
  return { 
    newState: state,
    result: `–û—à–∏–±–∫–∞: –û–±—ä–µ–∫—Ç "${objectId}" –Ω–µ –Ω–∞–π–¥–µ–Ω` 
  };
}
```

### 3. –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å

**–í—Å–µ–≥–¥–∞** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `cloneState(state)` –ø–µ—Ä–µ–¥ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π:

```typescript
import { cloneState } from '../utils/gameUtils';

apply: (state: GameState, args: any) => {
  const clonedState = cloneState(state);
  // –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º clonedState, –ù–ï state
  return { newState: clonedState, result: "..." };
}
```

### 4. –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–π `result` –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ:

```typescript
result: `–û–±—ä–µ–∫—Ç "${obj.name}" –ø–µ—Ä–µ–¥–∞–Ω –∏–≥—Ä–æ–∫—É "${player.name}"`
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ö–∞–∂–¥—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ç–µ—Å—Ç—ã –≤ `tools/__tests__/`:

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
npm test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
npx vitest run setAttribute
```

–¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å:

* –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
* –í–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
* –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
* –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è

## –í–∫–ª—é—á–µ–Ω–∏–µ/–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤ UI

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (—Å—Ä–µ–¥–Ω—è—è –∫–æ–ª–æ–Ω–∫–∞) –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –ö–∞–∂–¥—ã–π –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫–æ–π **ENABLED/DISABLED**. –û—Ç–∫–ª—é—á—ë–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ Gemini API.

## Drag-and-Drop –≤ UI (Objects Tab)

–í–æ –≤–∫–ª–∞–¥–∫–µ **Objects** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å drag-and-drop –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π.

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* **–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤:** –û–±—ä–µ–∫—Ç—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å –Ω–∞ –¥—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã, –ª–æ–∫–∞—Ü–∏–∏ –∏–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
* **–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π:** –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—Ç—å –Ω–∞ –æ–±—ä–µ–∫—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–∞–¥–∏—Ç—å –≤ –º–∞—à–∏–Ω—É) –∏–ª–∏ –ª–æ–∫–∞—Ü–∏–∏
* **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–∏:** –û–±—ä–µ–∫—Ç—ã –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –ª–æ–∫–∞—Ü–∏—è–º
* **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è `connectionId` –∏ `locationId`

### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞

* **–ü–æ –ª–æ–∫–∞—Ü–∏—è–º:** –û–±—ä–µ–∫—Ç—ã –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫ –ª–æ–∫–∞—Ü–∏—è–º, –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –ª–æ–∫–∞—Ü–∏–∏ (üìç)
* **–ë–µ–∑ —Å–≤—è–∑–∏:** –ù–µ—Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥—Ä—É–ø–ø–µ
* **–í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å:** –û–±—ä–µ–∫—Ç—ã –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –æ—Ç—Å—Ç—É–ø–æ–º

### –ó–∞—â–∏—Ç–∞

* –ù–µ–ª—å–∑—è –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å –æ–±—ä–µ–∫—Ç –≤ —Å–∞–º–æ–≥–æ —Å–µ–±—è
* –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
* –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (–ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Ü–µ–ª–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞)
