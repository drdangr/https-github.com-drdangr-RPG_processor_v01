# AI RPG State Processor (Game Master Module)

## Обзор
Это веб-приложение (React + TypeScript) для управления состоянием настольной ролевой игры с использованием ИИ (Google Gemini). Приложение выступает в роли "State Processor" (Процессора Состояний).

Оно позволяет Гейм-Мастеру (или соло-игроку):
1. Хранить и редактировать состояние мира (Локации, Игроки, Предметы) в удобном UI.
2. Вводить текстовые заявки (действия) игроков.
3. Отправлять состояние и заявку в Gemini API.
4. Автоматически обрабатывать изменения состояния через **Инструменты (Tools)** (например, перемещение предметов, изменение состояний).
5. Получать художественное повествование и обновленный JSON состояния.

## Стек технологий
*   **Frontend:** React 19, TypeScript
*   **Styling:** Tailwind CSS (inline classes)
*   **AI:** @google/genai SDK (Gemini 2.5 Flash)
*   **Build:** Vite 6

## Установка и Запуск

1.  **Установите зависимости:**
    ```bash
    npm install
    ```

2.  **Настройте API Key:**
    Приложение ожидает ключ API Google Gemini в переменной окружения `process.env.API_KEY`.
    Создайте файл `.env` в корне проекта:
    ```
    API_KEY=ваш_ключ_здесь
    ```

3.  **Запустите сервер разработки:**
    ```bash
    npm run dev
    ```
    Приложение будет доступно по адресу `http://localhost:3000/`

4.  **Сборка для продакшена:**
    ```bash
    npm run build
    npm run preview
    ```

## Основные возможности
*   **Редактор Данных:** Визуальные формы для редактирования JSON-структур с выпадающими списками для связей (ID локаций, игроков, объектов).
*   **Модульные Инструменты:** Система плагинов для логики игры с валидацией входных данных (см. `TOOLS_SYSTEM.md`).
*   **Дифф-Viewer:** Визуализация изменений (было → стало) после хода ИИ.
*   **Логгирование:** Просмотр цепочки вызовов инструментов и их аргументов.
*   **Автосохранение:** Данные автоматически сохраняются через 2 секунды после изменений (через API или в localStorage как резервную копию).
